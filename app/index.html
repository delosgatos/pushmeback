<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="manifest" href="/_libs/manifest.json" />

  <title>Push Codelab</title>

  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.2.1/material.min.js"></script>
  <script src="https://yastatic.net/jquery/3.1.1/jquery.min.js"></script>
  <link rel="stylesheet" href="styles/index.css">



    <!--<script src="https://push/css/OneSignalSDK.js"></script>
    <script>
        var OneSignal = window.OneSignal || [];
        OneSignal.push(["init", {
            appId: "fe99c120-da25-47cb-8ab9-394acacedcba",
            autoRegister: false, /* Set to true to automatically prompt visitors */
            subdomainName: 'pushback',
            /*
             subdomainName: Use the value you entered in step 1.4: http://imgur.com/a/f6hqN
             */
            httpPermissionRequest: {
                enable: true,
                useCustomModal: true,
                modalTitle: 'Спасибо за подписку',
                modalMessage: "Теперь вы будете получать наши уведомления. В любой момент вы можете отписаться.",
                modalButtonText: 'Закрыть'
            },
            notifyButton: {
                enable: true /* Set to false to hide */
            },

            promptOptions: {
                /* Change bold title, limited to 30 characters */
                siteName: 'Clickscloud',
                /* Subtitle, limited to 90 characters */
                actionMessage: "Здравствуйте! Мы хотели бы держать вас в курсе наших событий!",
                /* Example notification title */
                exampleNotificationTitle: 'Пример нотификации',
                /* Example notification message */
                exampleNotificationMessage: 'Это пример текста нотификации',
                /* Text below example notification, limited to 50 characters */
                exampleNotificationCaption: 'Вы можете отписаться в любое время',
                /* Accept button text, limited to 15 characters */
                acceptButtonText: "РАЗРЕШИТЬ",
                /* Cancel button text, limited to 15 characters */
                cancelButtonText: "НЕТ"
            },
        }]);
        function subscribe() {
            OneSignal.push(["registerForPushNotifications"]);
            event.preventDefault();
        }


        /* ACCEPTING OR REJECTING NOTIFICATIONS */
        function acceptPrompt() {
            console.log('Calling acceptPrompt()');
            OneSignal.showHttpPermissionRequest();
            //OneSignal.registerForPushNotifications({httpPermissionRequest: true})
        }

        $(function(){
            OneSignal.push(function() {
                OneSignal.on('notificationPermissionChange', function(permissionChange) {
                    var currentPermission = permissionChange.to;
                    console.log('New permission state:', currentPermission);
                    if(currentPermission == "granted"){

                    }else if(currentPermission == "denied"){

                    }else{

                    }
                });
            });

            $('#signal').click(function(e){
                e.preventDefault();
                //subscribe();
                acceptPrompt();
            });
        });
    </script>-->


</head>

<body>



  <header>
      <h1>Push Codelab</h1>
  </header>

  <main>
      <p>Welcome to the push messaging codelab. The button below needs to be
          fixed to support subscribing to push.</p>
      <p>
          <button disabled class="js-push-btn mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
              Enable Push Messaging
          </button>
      </p>
      <section class="subscription-details js-subscription-details is-invisible">
          <p>Once you've subscribed your user, you'd send their subscription to your
              server to store in a database so that when you want to send a message
              you can lookup the subscription and send a message to it.</p>
          <p>To simplify things for this code lab copy the following details
              into the <a href="https://web-push-codelab.appspot.com/">Push Companion
                  Site</a> and it'll send a push message for you, using the application
              server keys on the site - so make sure they match.</p>
          <pre><code class="js-subscription-json"></code></pre>
      </section>
  </main>

  <a href="#" id="signal">SUBSCRIBE</a>


  <script src="scripts/main.js"></script>

  <script src="https://code.getmdl.io/1.2.1/material.min.js"></script>

<!--
<script>
    if (window.Notification.permission === "default") {
        OneSignal._showingHttpPermissionRequest = true;
        window.Notification.requestPermission(permission => {
            OneSignal._showingHttpPermissionRequest = false;
        resolve(permission);
        log.debug('HTTP Permission Request Result:', permission);
        if (permission === 'default') {
            TestHelper.markHttpsNativePromptDismissed();
            OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED, {
                permission: permission,
                forceUpdatePermission: true
            });
        }
    });
        Event.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED);
    } else {
        Event.trigger(OneSignal.EVENTS.TEST_WOULD_DISPLAY);
        throw new InvalidStateError(InvalidStateReason.PushPermissionAlreadyGranted);
    }
</script>
-->






</body>
</html>
